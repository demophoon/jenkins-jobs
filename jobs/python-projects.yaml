- job-template:
    name: '{name}-Flake8'
    project-type: 'freestyle'
    defaults: 'global'
    description: 'Flake8 Check Python Code'
    display-name: '{name} Flake8 Check'
    concurrent: true
    quiet-period: 30
    triggers:
        - github
        - github-pull-request:
            white-list:
                - demophoon
    scm:
        - git:
            url: '{git_repo}'
            branches:
                - 'origin/master'
            local-branch: 'master'
            credentials-id: !include github-creds.txt
            git-config-name: 'Jenkins (Britt Gresham)'
            git-config-email: 'jenkins@brittg.com'
    properties:
        - github_project_url:
            projectUrl: '{git_url}'
    builders:
        - github_pending_status:
        - shell: |
            rm -rf ./flake8
            virtualenv flake8
            . ./flake8/bin/activate

            which python
            which pip

            if [ -e "./setup.py" ]
            then
                python setup.py develop
            fi
            pip install flake8
            flake8 --ignore=E501 --exclude=flake8/* --max-line-length=140 --max-complexity=15 ./
    publishers:
        - github_status_on_failure:

- job-group:
    name: '{name}-tests'
    jobs:
        - '{name}-Flake8'

- project:
    name: 'Webvim'
    git_repo: 'git@github.com:demophoon/webvim.git'
    git_url: 'https://github.com/demophoon/webvim'
    jobs:
        - '{name}-tests'

- project:
    name: 'Brittbot'
    git_repo: 'git@github.com:demophoon/brittbot.git'
    git_url: 'https://github.com/demophoon/webvim'
    jobs:
        - '{name}-tests'

- project:
    name: 'FOSS Sams'
    git_repo: 'git@github.com:demophoon/sams.git'
    git_url: 'https://github.com/demophoon/webvim'
    jobs:
        - '{name}-tests'

- project:
    name: 'Cards of Lunacy'
    git_repo: 'git@github.com:demophoon/cards-of-lunacy.git'
    git_url: 'https://github.com/demophoon/webvim'
    jobs:
        - '{name}-tests'

- project:
    name: 'PingdomLib'
    git_repo: 'git@github.com:demophoon/PingdomLib.git'
    git_url: 'https://github.com/demophoon/webvim'
    jobs:
        - '{name}-tests'

- project:
    name: 'Vundle Headless Installer'
    git_repo: 'git@github.com:demophoon/vundle-headless-installer.git'
    git_url: 'https://github.com/demophoon/webvim'
    jobs:
        - '{name}-tests'
